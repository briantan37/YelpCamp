<% layout('/layouts/boilerplate') %>
<div id="map" style="width:100%; height: 500px;">
</div>
<h1>All Campgrounds</h1>
<p><a href="/campgrounds/new">Add Campgrounds</a></p>
<ul>
	<% for(let camp of allCamps) { %>
	<div class="card mb-3">
		<div class="row">
			<div class="col-md-4">
				<% if(camp.images.length) { %>
					<img class="img-fluid" src="<%=camp.images[0].url%>" alt="" />
				<% } else { %>
					<img class="img-fluid" src="https://res.cloudinary.com/ddqrpwi38/image/upload/v1607469552/YelpCamp/qewostlhk3xcytai9jnc.jpg" alt="" />
				<% } %>  
			</div>
			<div class="col-md-8">
				<div class="card-body">
					<h5 class="card-title"><%= camp.title %></h5>
					<p class="card-text"><%= camp.description %></p>
					<p class="card-text">
						<small class="text-muted"><%=camp.location%></small>
					</p>
					<a href="/campgrounds/<%=camp._id%>" class="btn btn-primary">View <%= camp.title %></a>
				</div>
			</div>
		</div>
	</div>
	<% } %>
</ul>
<script> 
	const mapToken = '<%- process.env.MAPBOX_TOKEN %>';
	const campgrounds = {features: <%- JSON.stringify(allCamps) %>};
</script>
<script src="/js/clusterMap.js"></script>